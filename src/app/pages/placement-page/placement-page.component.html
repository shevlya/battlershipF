<div class="container">
  <div class="game-setup">
    <div class="setup-options">
      <div class="setup-header">
        <h2>Способ расстановки</h2>
        <button class="instruction-trigger" id="instructionTrigger">
          <span>?</span>
          Инструкция
        </button>
      </div>

      <div class="strategy-options">
        <div class="strategy-option active" data-strategy="manual">
          <input type="radio" id="manual" name="strategy" checked>
          <label for="manual">
            Ручная расстановка
            <div class="tooltip-icon" data-tooltip="Разместите корабли самостоятельно на игровом поле">?</div>
          </label>
        </div>

        <div class="strategy-option" data-strategy="random">
          <input type="radio" id="random" name="strategy">
          <label for="random">
            Случайная расстановка
            <div class="tooltip-icon" data-tooltip="Корабли будут размещены случайным образом">?</div>
          </label>
        </div>

        <div class="strategy-option" data-strategy="coastal">
          <input type="radio" id="coastal" name="strategy">
          <label for="coastal">
            Береговая стратегия
            <div class="tooltip-icon" data-tooltip="Корабли размещаются вдоль границ поля">?</div>
          </label>
        </div>

        <div class="strategy-option" data-strategy="diagonal">
          <input type="radio" id="diagonal" name="strategy">
          <label for="diagonal">
            Диагональная стратегия
            <div class="tooltip-icon" data-tooltip="Корабли избегают главных диагоналей поля">?</div>
          </label>
        </div>

        <div class="strategy-option" data-strategy="half-field">
          <input type="radio" id="half-field" name="strategy">
          <label for="half-field">
            Полупольная стратегия
            <div class="tooltip-icon" data-tooltip="Корабли концентрируются в одной половине поля">?</div>
          </label>
        </div>
      </div>

      <!-- Перенесенные счетчики кораблей -->
      <div class="control-section">
        <h3>Осталось разместить</h3>
        <div class="ship-counters-compact">
          <div class="ship-counter-item">
            <span class="counter-label">Линкоры (4):</span>
            <span class="counter-value" id="battleshipCount">1</span>
          </div>
          <div class="ship-counter-item">
            <span class="counter-label">Крейсеры (3):</span>
            <span class="counter-value" id="cruiserCount">2</span>
          </div>
          <div class="ship-counter-item">
            <span class="counter-label">Эсминцы (2):</span>
            <span class="counter-value" id="destroyerCount">3</span>
          </div>
          <div class="ship-counter-item">
            <span class="counter-label">Катера (1):</span>
            <span class="counter-value" id="boatCount">4</span>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary" id="autoPlaceBtn">Авторасстановка</button>
        <button class="btn btn-secondary" id="clearBtn">Очистить поле</button>
        <button class="btn btn-success" id="startGameBtn" disabled>Начать игру</button>
      </div>
    </div>

    <div class="game-board">
      <h2>Ваше поле</h2>
      <div class="board-and-controls">
        <div class="board-container">
          <div class="board" id="playerBoard">
            <!-- Игровое поле будет сгенерировано JavaScript -->
          </div>
        </div>
      </div>
      
      <!-- Уменьшенные контролы под полем -->
      <div class="bottom-controls">
        <div class="control-section">
          <h3>Выбор корабля</h3>
          <div class="ship-selection-compact">
            <div class="ship-type active" data-size="4">
              <div class="ship-preview-compact">
                <div class="ship-cell"></div>
                <div class="ship-cell"></div>
                <div class="ship-cell"></div>
                <div class="ship-cell"></div>
              </div>
              <span class="ship-label">Линкор (4)</span>
            </div>
            <div class="ship-type" data-size="3">
              <div class="ship-preview-compact">
                <div class="ship-cell"></div>
                <div class="ship-cell"></div>
                <div class="ship-cell"></div>
              </div>
              <span class="ship-label">Крейсер (3)</span>
            </div>
            <div class="ship-type" data-size="2">
              <div class="ship-preview-compact">
                <div class="ship-cell"></div>
                <div class="ship-cell"></div>
              </div>
              <span class="ship-label">Эсминец (2)</span>
            </div>
            <div class="ship-type" data-size="1">
              <div class="ship-preview-compact">
                <div class="ship-cell"></div>
              </div>
              <span class="ship-label">Катер (1)</span>
            </div>
          </div>
        </div>

        <div class="control-section">
          <h3>Ориентация</h3>
          <div class="orientation-toggle-compact">
            <div class="orientation-option active" data-orientation="horizontal">
              <div class="orientation-icon horizontal"></div>
              <span>Горизонтально</span>
            </div>
            <div class="orientation-option" data-orientation="vertical">
              <div class="orientation-icon vertical"></div>
              <span>Вертикально</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Попап с инструкцией -->
<div class="instruction-popup" id="instructionPopup">
  <div class="popup-overlay" id="popupOverlay"></div>
  <div class="popup-content">
    <button class="popup-close" id="popupClose">&times;</button>
    <h3>Инструкция по расстановке</h3>
    <div class="instruction-content">
      <ul>
        <li>
          <strong>Выбор корабля и ориентации:</strong>
          <span>Выберите корабль из списка и ориентацию (горизонтальную или вертикальную)</span>
        </li>
        <li>
          <strong>Размещение кораблей:</strong>
          <span>Кликните на поле, чтобы разместить корабль. Перетащите для удобного размещения</span>
        </li>
        <li>
          <strong>Правила размещения:</strong>
          <span>Корабли не могут соприкасаться друг с другом (даже по диагонали)</span>
        </li>
        <li>
          <strong>Автоматическая расстановка:</strong>
          <span>Используйте кнопку "Авторасстановка" для автоматического размещения всех кораблей</span>
        </li>
        <li>
          <strong>Начало игры:</strong>
          <span>Нажмите "Начать игру", когда все корабли будут расставлены правильно</span>
        </li>
        <li>
          <strong>Стратегии:</strong>
          <span>Выберите одну из стратегий расстановки для автоматического размещения</span>
        </li>
      </ul>
    </div>
    <div class="popup-actions">
      <button class="btn btn-primary" id="popupUnderstand">Понятно</button>
    </div>
  </div>
</div>