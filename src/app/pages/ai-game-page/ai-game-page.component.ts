import { Component } from '@angular/core';
import { RouterModule, Router } from '@angular/router';

/**
 * Компонент страницы выбора сложности игры против ИИ
 * 
 * Основные функции:
 * - Предоставление выбора уровня сложности ИИ
 * - Визуальное отображение выбранного уровня сложности
 * - Навигация на страницу расстановки кораблей с передачей параметров
 * - Подготовка к началу игры против компьютерного противника
 * 
 * @component
 * @selector app-ai-game-page
 * 
 * Особенности:
 * - Передача параметров сложности через состояние маршрутизатора
 * - Подготовительный этап перед основной игровой сессией
 */
@Component({
  selector: 'app-ai-game-page',
  standalone: true,
  imports: [RouterModule],
  templateUrl: './ai-game-page.component.html',
  styleUrl: './ai-game-page.component.scss'
})
export class AiGamePageComponent {
  /**
   * Выбранный уровень сложности ИИ
   * 
   * - 'sailor' - Легкий уровень
   * - 'captain' - Средний уровень
   * - 'admiral' - Сложный уровень
   * - '' - Уровень не выбран (начальное состояние)
   * 
   * @default ''
   */
  selectedDifficulty: string = '';

  /**
   * Конструктор компонента
   * @param router - Сервис Angular Router для навигации между страницами
   */
  constructor(private router: Router) {}

  /**
   * Метод выбора уровня сложности ИИ
   * 
   * Устанавливает выбранный уровень сложности и обеспечивает
   * визуальную обратную связь пользователю через интерфейс
   * 
   * @param level - Уровень сложности ('sailor', 'captain', 'admiral')
   * 
   * Использование:
   * - Вызывается при клике на кнопку выбора сложности
   * - Обновляет свойство selectedDifficulty
   * - Активный выбор визуально выделяется в UI
   */
  selectDifficulty(level: string) {
    this.selectedDifficulty = level;
  }

  /**
   * Основной метод начала игры против ИИ
   * 
   * Процесс запуска игры:
   * 1. Проверка что уровень сложности выбран
   * 2. Логирование выбранного уровня для отладки
   * 3. Навигация на страницу расстановки кораблей
   * 4. Передача выбранного уровня сложности через состояние
   * 
   * Валидация:
   * - Проверка что selectedDifficulty не пустая строка
   * - Если уровень не выбран, метод завершается без действий
   * 
   * Навигация:
   * - Перенаправление на страницу расстановки
   * - Передача параметра difficulty в состоянии навигации
   */
  startGame() {
    // Проверка что уровень сложности был выбран пользователем
    if (this.selectedDifficulty) {
      console.log('Начинаем игру с уровнем сложности:', this.selectedDifficulty);
      
      /**
       * Навигация на страницу расстановки кораблей
       * с передачей выбранного уровня сложности
       * 
       * Параметры навигации:
       * - route: '/placement' - страница расстановки кораблей
       * - state: { difficulty: string } - уровень сложности ИИ
       */
      this.router.navigate(['/placement'], { 
        state: { 
          difficulty: this.selectedDifficulty 
        } 
      });
    }
  }
}